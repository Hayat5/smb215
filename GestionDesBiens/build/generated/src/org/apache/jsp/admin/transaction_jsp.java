package org.apache.jsp.admin;

import javax.servlet.*;
import javax.servlet.http.*;
import javax.servlet.jsp.*;

public final class transaction_jsp extends org.apache.jasper.runtime.HttpJspBase
    implements org.apache.jasper.runtime.JspSourceDependent {

  private static final JspFactory _jspxFactory = JspFactory.getDefaultFactory();

  private static java.util.List<String> _jspx_dependants;

  private org.glassfish.jsp.api.ResourceInjector _jspx_resourceInjector;

  public java.util.List<String> getDependants() {
    return _jspx_dependants;
  }

  public void _jspService(HttpServletRequest request, HttpServletResponse response)
        throws java.io.IOException, ServletException {

    PageContext pageContext = null;
    HttpSession session = null;
    ServletContext application = null;
    ServletConfig config = null;
    JspWriter out = null;
    Object page = this;
    JspWriter _jspx_out = null;
    PageContext _jspx_page_context = null;

    try {
      response.setContentType("text/html;charset=UTF-8");
      pageContext = _jspxFactory.getPageContext(this, request, response,
      			null, true, 8192, true);
      _jspx_page_context = pageContext;
      application = pageContext.getServletContext();
      config = pageContext.getServletConfig();
      session = pageContext.getSession();
      out = pageContext.getOut();
      _jspx_out = out;
      _jspx_resourceInjector = (org.glassfish.jsp.api.ResourceInjector) application.getAttribute("com.sun.appserv.jsp.resource.injector");

      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("<!DOCTYPE html>\n");
      out.write("<html>\n");
      out.write("    <head>\n");
      out.write("        <meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\">\n");
      out.write("        <title>JSP Page</title>\n");
      out.write("        <link rel=\"stylesheet\" type=\"text/css\" href=\"../css/style.css\"/>\n");
      out.write("        <link rel=\"stylesheet\" type=\"text/css\" href=\"../css/jquery.datetimepicker.css\"/>\n");
      out.write("\n");
      out.write("        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n");
      out.write("        <script type=\"text/javascript\" language=\"javascript\" src=\"http://code.jquery.com/jquery-1.11.3.min.js\"></script>\n");
      out.write("        <script type=\"text/javascript\" language=\"javascript\" src=\"http://code.jquery.com/ui/1.11.3/jquery-ui.js\"></script>\n");
      out.write("        <script type='text/javascript' src=\"http://codeinnovators.meximas.com/pdfexport/jspdf.debug.js\"></script>\n");
      out.write("\n");
      out.write("    </head>\n");
      out.write("    <body>\n");
      out.write("        <div class=\"menu\"><a href=\"center.html\">Centers</a><a href=\"item.html\">Items</a> <a href=\"location.html\">Location</a>\n");
      out.write("            <a href=\"salle.html\">Salle</a><a href=\"transaction.jsp\">Transaction</a><a href=\"transport.html\">Transport</a>\n");
      out.write("            <a href=\"type.html\">Type</a> <a href=\"personnel.html\">Personnel</a><a href=\"users.html\">Users</a> <a href=\"groupe.html\">Groupe</a>\n");
      out.write("        </div>\n");
      out.write("        <input type=\"hidden\" id=\"user\" value=\"");
      out.print( request.getUserPrincipal().getName());
      out.write("\" />\n");
      out.write("        <div id=\"loads\"></div>\n");
      out.write("        <div class=\"choose\">\n");
      out.write("            <input type=\"radio\" name=\"options\" value=\"interne\">Interne<br>\n");
      out.write("            <input type=\"radio\" name=\"options\" value=\"externe\">Externe <br />\n");
      out.write("            <button class=\"btn btn-warning btn-sm \" id=\"options\">Choose</button>\n");
      out.write("        </div>\n");
      out.write("        <div class=\"showme\">\n");
      out.write("            <table id=\"table\" class=\"hidden\">\n");
      out.write("                <tr class=\"head\">\n");
      out.write("                    <th class=\"export\">Id</th>\n");
      out.write("                    <th class=\"export\">Item</th>\n");
      out.write("                    <th class=\"export\">Date</th>\n");
      out.write("                    <th class=\"export\">Source</th>\n");
      out.write("\n");
      out.write("                    <th class=\"export\">Destination</th>\n");
      out.write("\n");
      out.write("                    <th class=\"externe\">Transport ID</th>\n");
      out.write("                    <th class=\"export map\">Status</th>\n");
      out.write("                    <th class=\"map\">Map</th>\n");
      out.write("                    <th>Edit</th>\n");
      out.write("                    <th>Delete</th>\n");
      out.write("                </tr>\n");
      out.write("            </table>\n");
      out.write("            <div class=\"btn-group open\">\n");
      out.write("                <button class=\"btn btn-warning btn-sm \" id=\"export\">Export Table Data</button>\n");
      out.write("\n");
      out.write("            </div>\n");
      out.write("            <div><button class=\"new\">New</button></div>\n");
      out.write("\n");
      out.write("            <div class=\"Items none\">\n");
      out.write("                <table>  \n");
      out.write("                    <tr class=\"justedit\"><td>transaction Id</td><td><input id=\"transactionid\" type=\"text\" value=\"\"  readonly /></td></tr>\n");
      out.write("                    <tr><td>Item</td><td><select id=\"item\" ></select></td></tr>\n");
      out.write("                    <tr><td>Date</td><td><input type=\"datetime\" id=\"date\" /></td></tr>\n");
      out.write("                    <tr><td>Source</td><td><select id=\"source\"></select></td></tr>\n");
      out.write("                    <tr><td>Destination</td><td><select id=\"destination\"></select></td></tr>   \n");
      out.write("                    <tr class=\"externe\"><td>Transport</td><td><select id=\"transport\"></select></td></tr>\n");
      out.write("\n");
      out.write("                    <tr class=\"externe map\"><td>Status</td>\n");
      out.write("                        <td><select id=\"status\" >\n");
      out.write("                                <option value=\"Delivered\">Delivered</option>\n");
      out.write("                                <option value=\"Not Delivered\">Not Delivered</option>\n");
      out.write("                            </select></td></tr>\n");
      out.write("                    <tr><td colspan=\"2\"><button id=\"save\" value=\"save\">Save</button></td></tr>\n");
      out.write("                </table>\n");
      out.write("            </div>\n");
      out.write("        </div>\n");
      out.write("\n");
      out.write("        <script src=\"../js/jquery.datetimepicker.full.js\"></script>\n");
      out.write("\n");
      out.write("        <script type=\"text/javascript\">\n");
      out.write("            var txt = \"\";\n");
      out.write("\n");
      out.write("            var trans = \"\";\n");
      out.write("            var items = \"\";\n");
      out.write("            $(document).ready(function () {\n");
      out.write("                $(\".showme\").css(\"display\", \"none\");\n");
      out.write("                //$(\"#table\").hide();\n");
      out.write("                $(\"#options\").click(function () {\n");
      out.write("\n");
      out.write("                    var option = $('input[name=options]:checked').val();\n");
      out.write("                    if (option == 'interne') {\n");
      out.write("                        $(\"#table tr:not(.head)\").remove();\n");
      out.write("                        $(\".map\").hide();\n");
      out.write("                        $(\"#save\").removeClass(\"externesave\");\n");
      out.write("                        listinterne();\n");
      out.write("                        $(\".externe\").hide();\n");
      out.write("                    }\n");
      out.write("                    else {\n");
      out.write("                        if (option == 'externe') {\n");
      out.write("                            $(\"#table tr:not(.head)\").remove();\n");
      out.write("                            listexterne();\n");
      out.write("                            $(\".externe\").show();\n");
      out.write("                            $(\".map\").show();\n");
      out.write("                            $(\"#save\").addClass(\"externesave\");\n");
      out.write("                        }\n");
      out.write("                    }\n");
      out.write("                    $(\".showme\").css(\"display\", \"block\");\n");
      out.write("                });\n");
      out.write("                $.datetimepicker.setLocale('en');\n");
      out.write("                $('#date').datetimepicker({format: 'Y-m-d h:m:s', defaultHours: 0, defaultMinutes: 0});\n");
      out.write("\n");
      out.write("\n");
      out.write("                getAllLocation();\n");
      out.write("\n");
      out.write("                getAlltransport();\n");
      out.write("                getAllitem();\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("                $('#export').click(demoFromHTML);\n");
      out.write("\n");
      out.write("            });\n");
      out.write("            function demoFromHTML() {\n");
      out.write("                var pdf = new jsPDF('p', 'pt', 'letter');\n");
      out.write("\n");
      out.write("                pdf.cellInitialize();\n");
      out.write("                pdf.setFontSize(10);\n");
      out.write("                var width = '';\n");
      out.write("                $.each($('#table tr'), function (i, row) {\n");
      out.write("                    $.each($(row).find(\"td.export, th.export\"), function (j, cell) {\n");
      out.write("                        var txt = $(cell).text().trim() || \" \";\n");
      out.write("\n");
      out.write("                        var width = (j == 2) ? 150 : 59; //make with column smaller\n");
      out.write("                        pdf.cell(10, 50, width, 30, txt, i);\n");
      out.write("                    });\n");
      out.write("                });\n");
      out.write("\n");
      out.write("                pdf.save('transaction.pdf');\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            function getAllitem() {\n");
      out.write("\n");
      out.write("                $.ajax({\n");
      out.write("                    url: 'http://localhost:8080/GestionDesBiens/webresources/model.item/',\n");
      out.write("                    type: \"GET\",\n");
      out.write("                    dataType: \"json\",\n");
      out.write("                    success: function (result) {\n");
      out.write("                        if (result) {\n");
      out.write("                            var len = result.length;\n");
      out.write("                            console.log(result.length);\n");
      out.write("                            if (len > 0) {\n");
      out.write("                                for (var i = 0; i < len; i++) {\n");
      out.write("\n");
      out.write("\n");
      out.write("                                    items += \"<option value='\" + result[i].itemId + \"'>\" + result[i].itemName + \"</option>\";\n");
      out.write("\n");
      out.write("                                    console.log(items);\n");
      out.write("\n");
      out.write("                                }\n");
      out.write("                                console.log(items + \"afetr for loop\");\n");
      out.write("\n");
      out.write("                            }\n");
      out.write("                        }\n");
      out.write("                        $(\"#item\").append(items);\n");
      out.write("\n");
      out.write("\n");
      out.write("                    },\n");
      out.write("                    error: function (jqXHR, textStatus, errorThrown) {\n");
      out.write("                        alert('error: ' + textStatus + ': ' + errorThrown);\n");
      out.write("                    }\n");
      out.write("\n");
      out.write("                });\n");
      out.write("                console.log(txt);\n");
      out.write("\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            function getAllLocation() {\n");
      out.write("\n");
      out.write("                $.ajax({\n");
      out.write("                    url: 'http://localhost:8080/GestionDesBiens/webresources/model.location/',\n");
      out.write("                    type: \"GET\",\n");
      out.write("                    dataType: \"json\",\n");
      out.write("                    success: function (result) {\n");
      out.write("                        if (result) {\n");
      out.write("                            var len = result.length;\n");
      out.write("                            console.log(result.length);\n");
      out.write("                            if (len > 0) {\n");
      out.write("                                for (var i = 0; i < len; i++) {\n");
      out.write("\n");
      out.write("\n");
      out.write("                                    txt += \"<option value='\" + result[i].locationId + \"'>\" + result[i].centerId.centerName + \" - \" + result[i].salleId.salleName + \" - \" + result[i].personnelId.personnelName + \"</option>\";\n");
      out.write("\n");
      out.write("                                    console.log(txt);\n");
      out.write("\n");
      out.write("                                }\n");
      out.write("                                console.log(txt + \"afetr for loop\");\n");
      out.write("\n");
      out.write("                            }\n");
      out.write("                        }\n");
      out.write("                        $(\"#source\").append(txt);\n");
      out.write("                        $(\"#destination\").append(txt);\n");
      out.write("\n");
      out.write("                    },\n");
      out.write("                    error: function (jqXHR, textStatus, errorThrown) {\n");
      out.write("                        alert('error: ' + textStatus + ': ' + errorThrown);\n");
      out.write("                    }\n");
      out.write("\n");
      out.write("                });\n");
      out.write("                console.log(txt);\n");
      out.write("\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            function getAlltransport() {\n");
      out.write("\n");
      out.write("                $.ajax({\n");
      out.write("                    url: 'http://localhost:8080/GestionDesBiens/webresources/model.transport/',\n");
      out.write("                    type: \"GET\",\n");
      out.write("                    dataType: \"json\",\n");
      out.write("                    success: function (result) {\n");
      out.write("                        if (result) {\n");
      out.write("                            var len = result.length;\n");
      out.write("                            console.log(result.length);\n");
      out.write("                            if (len > 0) {\n");
      out.write("                                for (var i = 0; i < len; i++) {\n");
      out.write("\n");
      out.write("\n");
      out.write("                                    trans += \"<option value='\" + result[i].transportId + \"'>\" + result[i].personnelId.personnelName + \" - \" + result[i].transportDate + \"</option>\";\n");
      out.write("\n");
      out.write("                                    console.log(trans);\n");
      out.write("\n");
      out.write("                                }\n");
      out.write("                                console.log(trans + \"afetr for loop\");\n");
      out.write("\n");
      out.write("                            }\n");
      out.write("                        }\n");
      out.write("                        $(\"#transport\").append(trans);\n");
      out.write("\n");
      out.write("\n");
      out.write("                    },\n");
      out.write("                    error: function (jqXHR, textStatus, errorThrown) {\n");
      out.write("                        alert('error: ' + textStatus + ': ' + errorThrown);\n");
      out.write("                    }\n");
      out.write("\n");
      out.write("                });\n");
      out.write("                console.log(txt);\n");
      out.write("\n");
      out.write("            }\n");
      out.write("            function listexterne() {\n");
      out.write("                $.ajax({\n");
      out.write("                    type: 'GET',\n");
      out.write("                    url: 'http://localhost:8080/GestionDesBiens/webresources/model.transaction',\n");
      out.write("                    data: $('#table').serialize(),\n");
      out.write("                    dataType: \"json\", //to parse string into JSON object,\n");
      out.write("                    beforeSend: function () {\n");
      out.write("                        // this is where we append a loading image\n");
      out.write("                        $('#loads').html('<div class=\"loading\"><img src=\"../images/loading.gif\" alt=\"Loading...\" /></div>');\n");
      out.write("                    },\n");
      out.write("                    success: function (data) {\n");
      out.write("\n");
      out.write("                        $('#loads').empty();\n");
      out.write("                        if (data) {\n");
      out.write("                            $(\"#table tr:not(.head)\").remove();\n");
      out.write("                            var len = data.length;\n");
      out.write("                            var txt = \"\";\n");
      out.write("                            if (len > 0) {\n");
      out.write("                                for (var i = 0; i < len; i++) {\n");
      out.write("                                    if (data[i].transactionId) {\n");
      out.write("                                        var keys = Object.keys(data[i]);\n");
      out.write("                                        var check = false;\n");
      out.write("                                        for (var x = 0; x < keys.length; x++) {\n");
      out.write("                                            if (keys[x] == 'transportId') {\n");
      out.write("                                                check = true;\n");
      out.write("                                            }\n");
      out.write("                                        }\n");
      out.write("\n");
      out.write("                                        //if (data[i].hasOwnProperty(\"transportId\"))\n");
      out.write("                                        if (check)\n");
      out.write("                                        {\n");
      out.write("                                            if (data[i].status == 'Not Delivered') {\n");
      out.write("                                                var map = '<a href=\"maplocation.html\">Map Location</a>';\n");
      out.write("                                            }\n");
      out.write("                                            else {\n");
      out.write("                                                var map = 'Delivered';\n");
      out.write("                                            }\n");
      out.write("\n");
      out.write("                                            var transportData = data[i].transportId.transportId;\n");
      out.write("\n");
      out.write("                                            txt += \"<tr id='\" + data[i].transactionId + \"' ><td id='transaction_\" + data[i].transactionId + \"' class='export'>\" + data[i].transactionId + \"</td>\\n\\\n");
      out.write("                                               <td class='export'>\" + data[i].itemId.itemName + \"</td><td class='export'>\" + data[i].transactionDate + \"</td><td id='center_\" + data[i].locationIdDest.locationId + \"' class='export'>\" + data[i].locationIdDest.locationId + \"</td> <td id='personnel_\" + data[i].locationIdSrc.locationId + \"' class='export'>\"\n");
      out.write("                                                    + data[i].locationIdSrc.locationId + \"</td><td class='export externe'>\" + data[i].transportId.transportId + \"</td><td class='export'>\" + data[i].status + \"</td><td>\" + map + \"</td>\\n\\\n");
      out.write("                                                <td class='edit' id='edit_\" + data[i].transactionId + \"'>Edit </td><td class='delete' id='delete_\" + data[i].transactionId + \"'>Delete </td></tr>\";\n");
      out.write("\n");
      out.write("                                        }\n");
      out.write("\n");
      out.write("\n");
      out.write("                                    }\n");
      out.write("                                }\n");
      out.write("                                if (txt != \"\") {\n");
      out.write("                                    $(\"#table\").append(txt).removeClass(\"hidden\");\n");
      out.write("                                }\n");
      out.write("                                $(\".externe\").show();\n");
      out.write("                            }\n");
      out.write("                        }\n");
      out.write("                        $('.edit').click(edit);\n");
      out.write("                        $('.delete').click(delete2);\n");
      out.write("                        $('.new').click(New);\n");
      out.write("\n");
      out.write("                    },\n");
      out.write("                    error: function () {\n");
      out.write("                        // failed request; give feedback to user\n");
      out.write("                        $('#loads').html('<p class=\"error\"><strong>Oops!</strong> Try that again in a few moments.</p>');\n");
      out.write("                    }\n");
      out.write("                });\n");
      out.write("            }\n");
      out.write("            function listinterne() {\n");
      out.write("                $.ajax({\n");
      out.write("                    type: 'GET',\n");
      out.write("                    url: 'http://localhost:8080/GestionDesBiens/webresources/model.transaction',\n");
      out.write("                    data: $('#table').serialize(),\n");
      out.write("                    dataType: \"json\", //to parse string into JSON object,\n");
      out.write("                    beforeSend: function () {\n");
      out.write("                        // this is where we append a loading image\n");
      out.write("                        $('#loads').html('<div class=\"loading\"><img src=\"../images/loading.gif\" alt=\"Loading...\" /></div>');\n");
      out.write("                    },\n");
      out.write("                    success: function (data) {\n");
      out.write("                        $('#loads').empty();\n");
      out.write("                        $(\"#table tr:not(.head)\").remove();\n");
      out.write("                        if (data) {\n");
      out.write("\n");
      out.write("                            var len = data.length;\n");
      out.write("                            var txt = \"\";\n");
      out.write("                            if (len > 0) {\n");
      out.write("                                for (var i = 0; i < len; i++) {\n");
      out.write("                                    if (data[i].transactionId) {\n");
      out.write("                                        var keys = Object.keys(data[i]);\n");
      out.write("                                        var check = false;\n");
      out.write("                                        for (var x = 0; x < keys.length; x++) {\n");
      out.write("                                            if (keys[x] == 'transportId') {\n");
      out.write("                                                check = true;\n");
      out.write("                                            }\n");
      out.write("                                        }\n");
      out.write("\n");
      out.write("                                        //if (data[i].hasOwnProperty(\"transportId\"))\n");
      out.write("                                        if (!check)\n");
      out.write("\n");
      out.write("                                        {\n");
      out.write("\n");
      out.write("                                            var transportData = 'Null';\n");
      out.write("                                            txt += \"<tr id='\" + data[i].transactionId + \"' ><td id='transaction_\" + data[i].transactionId + \"' class='export'>\" + data[i].transactionId + \"</td>\\n\\\n");
      out.write("                                               <td class='export'>\" + data[i].itemId.itemName + \"</td><td class='export'>\" + data[i].transactionDate + \"</td><td id='center_\" + data[i].locationIdDest.locationId + \"' class='export'>\" + data[i].locationIdDest.locationId + \"</td><td id='personnel_\" + data[i].locationIdSrc.locationId + \"' class='export'>\"\n");
      out.write("                                                    + data[i].locationIdSrc.locationId + \"</td>\\n\\\n");
      out.write("                                                <td class='edit' id='edit_\" + data[i].transactionId + \"'>Edit </td><td class='delete' id='delete_\" + data[i].transactionId + \"'>Delete </td></tr>\";\n");
      out.write("\n");
      out.write("\n");
      out.write("                                        }\n");
      out.write("                                    }\n");
      out.write("                                }\n");
      out.write("                                if (txt != \"\") {\n");
      out.write("                                    $(\"#table\").append(txt).removeClass(\"hidden\");\n");
      out.write("                                }\n");
      out.write("                            }\n");
      out.write("                        }\n");
      out.write("                        $('.edit').click(edit);\n");
      out.write("                        $('.delete').click(delete2);\n");
      out.write("                        $('.new').click(New);\n");
      out.write("\n");
      out.write("                    },\n");
      out.write("                    error: function () {\n");
      out.write("                        // failed request; give feedback to user\n");
      out.write("                        $('#loads').html('<p class=\"error\"><strong>Oops!</strong> Try that again in a few moments.</p>');\n");
      out.write("                    }\n");
      out.write("                });\n");
      out.write("            }\n");
      out.write("            function delete2() {\n");
      out.write("\n");
      out.write("                console.log(\"beforedelete\");\n");
      out.write("\n");
      out.write("                var id = $(this).attr('id');\n");
      out.write("                var res = id.substring(7);\n");
      out.write("\n");
      out.write("                $.ajax({\n");
      out.write("                    type: 'DELETE',\n");
      out.write("                    url: 'http://localhost:8080/GestionDesBiens/webresources/model.transaction/' + res,\n");
      out.write("                    beforeSend: function () {\n");
      out.write("                        // this is where we append a loading image\n");
      out.write("                        $('#loads').html('<div class=\"loading\"><img src=\"../images/loading.gif\" alt=\"Loading...\" /></div>');\n");
      out.write("                    },\n");
      out.write("                    success: function (data) {\n");
      out.write("                        $(\"#loads\").empty();\n");
      out.write("\n");
      out.write("                        console.log('Item deleted successfully');\n");
      out.write("                    },\n");
      out.write("                    error: function (jqXHR) {\n");
      out.write("                        $(\"#loads\").empty();\n");
      out.write("                        console.log('delete item error');\n");
      out.write("                    }\n");
      out.write("                });\n");
      out.write("\n");
      out.write("                $(\"#\" + res).remove();\n");
      out.write("                console.log(\"hi\");\n");
      out.write("\n");
      out.write("                console.log(\"delete\");\n");
      out.write("            }\n");
      out.write("\n");
      out.write("\n");
      out.write("            function edit() {\n");
      out.write("                var id = $(this).attr('id');\n");
      out.write("                var res = id.substring(5);\n");
      out.write("                $.ajax({\n");
      out.write("                    url: 'http://localhost:8080/GestionDesBiens/webresources/model.transaction/' + res,\n");
      out.write("                    type: \"GET\",\n");
      out.write("                    dataType: \"json\",\n");
      out.write("                    success: function (data) {\n");
      out.write("                        $('#loads').empty();\n");
      out.write("                        $(\".justedit\").empty();\n");
      out.write("                        $(\".justedit\").html(\"<td>transaction Id</td><td><input id='transactionid' value='\" + data.transactionId + \"' readonly /></td>\");\n");
      out.write("\n");
      out.write("\n");
      out.write("                        $(\"#status\").val(data.status);\n");
      out.write("                        $(\"#transactionid\").data(data.transactionId);\n");
      out.write("                        $(\"#item\").val(data.itemId.itemId);\n");
      out.write("                        $(\"#date\").val(data.transactionDate);\n");
      out.write("                        $(\"#source\").val(data.locationIdSrc.locationId);\n");
      out.write("\n");
      out.write("                        $(\"#destination\").val(data.locationIdDest.locationId);\n");
      out.write("                        var keys = Object.keys(data);\n");
      out.write("                        var check = false;\n");
      out.write("                        for (var x = 0; x < keys.length; x++) {\n");
      out.write("                            if (keys[x] == 'transportId') {\n");
      out.write("                                check = true;\n");
      out.write("                            }\n");
      out.write("                        }\n");
      out.write("\n");
      out.write("                        if (check) {\n");
      out.write("                            $(\"#transport\").val(data.transportId.transportId);\n");
      out.write("                        }\n");
      out.write("                        else {\n");
      out.write("                            $(\"#transport\").val();\n");
      out.write("                        }\n");
      out.write("\n");
      out.write("\n");
      out.write("                    }\n");
      out.write("                });\n");
      out.write("\n");
      out.write("                $(\".none\").css(\"display\", \"block\");\n");
      out.write("                $(\".justedit\").show();\n");
      out.write("\n");
      out.write("                console.log(\"delete\");\n");
      out.write("            }\n");
      out.write("\n");
      out.write("            function saveexterne() {\n");
      out.write("\n");
      out.write("                var id = $(\"#transactionid\").val();\n");
      out.write("\n");
      out.write("\n");
      out.write("                var item = $(\"#item\").val();\n");
      out.write("                var itemname = $('#item').find(\":selected\").text();\n");
      out.write("                var source = $(\"#source\").val();\n");
      out.write("\n");
      out.write("                var destination = $(\"#destination\").val();\n");
      out.write("\n");
      out.write("                var status = $(\"#status\").val();\n");
      out.write("\n");
      out.write("                var username = $('#user').val();\n");
      out.write("                var transport = $(\"#transport\").val();\n");
      out.write("                var firstdate = $(\"#date\").val();\n");
      out.write("                var date = firstdate.substring(0, 10);\n");
      out.write("                date = date + \"T\" + firstdate.substring(11, 19) + \"+00:00\";\n");
      out.write("\n");
      out.write("                if (id == '') {\n");
      out.write("                    console.log(\"vide\");\n");
      out.write("\n");
      out.write("                    $.ajax({url: \"http://localhost:8080/GestionDesBiens/webresources/model.transaction/lastid\", success: function (count) {\n");
      out.write("\n");
      out.write("                            var len = count.length;\n");
      out.write("\n");
      out.write("                            newid = 1;\n");
      out.write("                            if (len > 0) {\n");
      out.write("                                for (var i = 0; i < len; i++) {\n");
      out.write("\n");
      out.write("                                    newid = Number(count[i].transactionId) + 1;\n");
      out.write("\n");
      out.write("                                }\n");
      out.write("\n");
      out.write("                            }\n");
      out.write("                            console.log(newid);\n");
      out.write("\n");
      out.write("                            var edit = ' {\"itemId\":{\"itemId\":' + item + '},\"locationIdDest\":{\"locationId\":' + destination + '},\"locationIdSrc\":{\"locationId\":' + source + '},\"status\":\"' + status + '\",\"transactionDate\":\"' + date + '\",\"transactionId\":' + newid + ',\"transportId\":{\"transportId\":' + transport + '},\"username\":{\"username\":\"' + username + '\"}}';\n");
      out.write("\n");
      out.write("                            $.ajax({\n");
      out.write("                                type: 'POST', // Use POST with X-HTTP-Method-Override or a straight PUT if appropriate.\n");
      out.write("                                dataType: 'application/json', // Set datatype - affects Accept header\n");
      out.write("                                contentType: \"application/json; charset=utf-8\",\n");
      out.write("                                url: \"http://localhost:8080/GestionDesBiens/webresources/model.transaction/\", // A valid URL\n");
      out.write("                                headers: {\"X-HTTP-Method-Override\": \"PUT\"}, // X-HTTP-Method-Override set to PUT.\n");
      out.write("                                data: edit, // Some data e.g. Valid JSON as a string\n");
      out.write("                                success: function (html) {\n");
      out.write("                                    $(\"#table tr:not(.head)\").remove();\n");
      out.write("                                    listexterne();\n");
      out.write("                                    //noinspection DocumentWriteJS\n");
      out.write("                                    //  $(\".none\").hide();\n");
      out.write("                                    //  $(\"#table tr:not(.head)\").remove();\n");
      out.write("\n");
      out.write("                                    var row = \"<tr id='\" + newid + \"' ><td id='transaction_\" + newid + \"'>\" + newid + \"</td>\\n\\\n");
      out.write("                                                <td>\" + itemname + \"</td><td>\" + date + \"</td><td id='center_\" + destination + \"'>\" + destination + \"</td><td id='personnel_\" + source + \"'>\"\n");
      out.write("                                            + source + \"</td><td>\" + transport + \"</td><td>\" + status + \"</td>\\n\\\n");
      out.write("                                                 <td class='edit' id='edit_\" + newid + \"'>Edit </td><td class='delete' id='delete_\" + newid + \"'>Delete </td></tr>\";\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("                                    console.log(\"try to update\");\n");
      out.write("\n");
      out.write("\n");
      out.write("                                    $(\"#table\").append(row);\n");
      out.write("                                    console.log(\"updated\");\n");
      out.write("\n");
      out.write("                                }\n");
      out.write("                            });\n");
      out.write("                        }});\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("                }\n");
      out.write("                else {\n");
      out.write("                    var edit = ' {\"itemId\":{\"itemId\":' + item + '},\"locationIdDest\":{\"locationId\":' + destination + '},\"locationIdSrc\":{\"locationId\":' + source + '},\"status\":\"' + status + '\",\"transactionDate\":\"' + date + '\",\"transactionId\":' + id + ',\"transportId\":{\"transportId\":' + transport + '},\"username\":{\"username\":\"' + username + '\"}}';\n");
      out.write("\n");
      out.write("\n");
      out.write("                    jQuery.ajax({\n");
      out.write("                        url: \"http://localhost:8080/GestionDesBiens/webresources/model.transaction/\" + id,\n");
      out.write("                        type: 'PUT',\n");
      out.write("                        data: edit,\n");
      out.write("                        contentType: 'application/json; charset=utf-8',\n");
      out.write("                        success: function (html) {\n");
      out.write("                            //noinspection DocumentWriteJS\n");
      out.write("                            $(\".none\").hide();\n");
      out.write("                            $(\"#table tr:not(.head)\").remove();\n");
      out.write("                            console.log(\"try to update\");\n");
      out.write("                            listexterne();\n");
      out.write("                            console.log(\"updated\");\n");
      out.write("\n");
      out.write("                        }\n");
      out.write("                    });\n");
      out.write("                }\n");
      out.write("            }\n");
      out.write("\n");
      out.write("\n");
      out.write("            function saveinterne() {\n");
      out.write("\n");
      out.write("                var id = $(\"#transactionid\").val();\n");
      out.write("\n");
      out.write("\n");
      out.write("                var item = $(\"#item\").val();\n");
      out.write("                var itemname = $('#item').find(\":selected\").text();\n");
      out.write("                var source = $(\"#source\").val();\n");
      out.write("\n");
      out.write("                var destination = $(\"#destination\").val();\n");
      out.write("\n");
      out.write("                var username = $(\"#user\").val();\n");
      out.write("\n");
      out.write("                var firstdate = $(\"#date\").val();\n");
      out.write("                var date = firstdate.substring(0, 10);\n");
      out.write("                date = date + \"T\" + firstdate.substring(11, 19) + \"+00:00\";\n");
      out.write("\n");
      out.write("                if (id == '') {\n");
      out.write("\n");
      out.write("                    console.log(\"vide\");\n");
      out.write("\n");
      out.write("                    $.ajax({url: \"http://localhost:8080/GestionDesBiens/webresources/model.transaction/lastid\", success: function (count) {\n");
      out.write("\n");
      out.write("                            var len = count.length;\n");
      out.write("\n");
      out.write("                            newid = 1;\n");
      out.write("                            if (len > 0) {\n");
      out.write("                                for (var i = 0; i < len; i++) {\n");
      out.write("\n");
      out.write("                                    newid = Number(count[i].transactionId) + 1;\n");
      out.write("\n");
      out.write("                                }\n");
      out.write("\n");
      out.write("                            }\n");
      out.write("                            console.log(newid);\n");
      out.write("\n");
      out.write("                            var edit = ' {\"itemId\":{\"itemId\":' + item + '},\"locationIdDest\":{\"locationId\":' + destination + '},\"locationIdSrc\":{\"locationId\":' + source + '},\"transactionDate\":\"' + date + '\",\"status\":\" \",\"transactionId\":' + newid + ',\"username\":{\"username\":\"' + username + '\"}}';\n");
      out.write("\n");
      out.write("                            $.ajax({\n");
      out.write("                                type: 'POST', // Use POST with X-HTTP-Method-Override or a straight PUT if appropriate.\n");
      out.write("                                dataType: 'application/json', // Set datatype - affects Accept header\n");
      out.write("                                contentType: \"application/json; charset=utf-8\",\n");
      out.write("                                url: \"http://localhost:8080/GestionDesBiens/webresources/model.transaction/\", // A valid URL\n");
      out.write("                                headers: {\"X-HTTP-Method-Override\": \"PUT\"}, // X-HTTP-Method-Override set to PUT.\n");
      out.write("                                data: edit, // Some data e.g. Valid JSON as a string\n");
      out.write("                                success: function (html) {\n");
      out.write("                                    //noinspection DocumentWriteJS\n");
      out.write("                                    //  $(\".none\").hide();\n");
      out.write("                                    //  $(\"#table tr:not(.head)\").remove();\n");
      out.write("\n");
      out.write("                                    var row = \"<tr id='\" + newid + \"' ><td id='transaction_\" + newid + \"'>\" + newid + \"</td>\\n\\\n");
      out.write("                                                <td>\" + itemname + \"</td><td>\" + date + \"</td><td id='center_\" + destination + \"'>\" + destination + \"</td><td id='personnel_\" + source + \"'>\"\n");
      out.write("                                            + source + \"</td>\\n\\\n");
      out.write("                                                 <td class='edit' id='edit_\" + newid + \"'>Edit </td><td class='delete' id='delete_\" + newid + \"'>Delete </td></tr>\";\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("                                    console.log(\"try to update\");\n");
      out.write("\n");
      out.write("                                    $(\"#table\").append(row);\n");
      out.write("                                    console.log(\"updated\");\n");
      out.write("\n");
      out.write("                                }\n");
      out.write("                            });\n");
      out.write("                        }});\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("\n");
      out.write("                }\n");
      out.write("                else {\n");
      out.write("                    var edit = ' {\"itemId\":{\"itemId\":' + item + '},\"locationIdDest\":{\"locationId\":' + destination + '},\"locationIdSrc\":{\"locationId\":' + source + '},\"transactionDate\":\"' + date + '\",\"status\":\" \",\"transactionId\":' + id + ',\"username\":{\"username\":\"' + username + '\"}}';\n");
      out.write("\n");
      out.write("\n");
      out.write("                    jQuery.ajax({\n");
      out.write("                        url: \"http://localhost:8080/GestionDesBiens/webresources/model.transaction/\" + id,\n");
      out.write("                        type: 'PUT',\n");
      out.write("                        data: edit,\n");
      out.write("                        contentType: 'application/json; charset=utf-8',\n");
      out.write("                        success: function (html) {\n");
      out.write("                            //noinspection DocumentWriteJS\n");
      out.write("                            $(\".none\").hide();\n");
      out.write("                            $(\"#table tr:not(.head)\").remove();\n");
      out.write("                            console.log(\"try to update\");\n");
      out.write("                            listinterne();\n");
      out.write("                            console.log(\"updated\");\n");
      out.write("\n");
      out.write("                        }\n");
      out.write("                    });\n");
      out.write("                }\n");
      out.write("            }\n");
      out.write("            $('#save').click(function (e) {\n");
      out.write("                if ($(this).hasClass(\"externesave\")) {\n");
      out.write("\n");
      out.write("                    saveexterne();\n");
      out.write("\n");
      out.write("                }\n");
      out.write("                else {\n");
      out.write("\n");
      out.write("                    saveinterne();\n");
      out.write("\n");
      out.write("\n");
      out.write("                }\n");
      out.write("\n");
      out.write("            });\n");
      out.write("            function New() {\n");
      out.write("\n");
      out.write("                $(\".justedit\").hide();\n");
      out.write("                $(\"#item\").val(\"\");\n");
      out.write("                $(\"#date\").val(\"\");\n");
      out.write("                $(\"#source\").val(\"\");\n");
      out.write("\n");
      out.write("                $(\"#destination\").val(\"\");\n");
      out.write("                $(\"#transactionid\").val(\"\");\n");
      out.write("\n");
      out.write("                $(\"#status\").val(\"\");\n");
      out.write("                $(\".none\").css(\"display\", \"block\");\n");
      out.write("            }\n");
      out.write("\n");
      out.write("        </script>\n");
      out.write("\n");
      out.write("    </body>\n");
      out.write("</html>\n");
    } catch (Throwable t) {
      if (!(t instanceof SkipPageException)){
        out = _jspx_out;
        if (out != null && out.getBufferSize() != 0)
          out.clearBuffer();
        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);
        else throw new ServletException(t);
      }
    } finally {
      _jspxFactory.releasePageContext(_jspx_page_context);
    }
  }
}
